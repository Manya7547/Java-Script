<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body style="background-color: #212121;">
    <div class="card" style="box-shadow: 4px 4px 8px 4px rgba(0,0,0,0.2); transition:0.3s; border-radius: 5px">
        <img id = "image" src="" alt="Avatar" style="width:250px; border-radius:5px 5px 0 0;">
        <div class="container">
          <h4 id="name"><b>Name: </b></h4>
          <p id="count">Followers Count </p>
        </div>
      </div>
</body>
<script>
    const requestURL = 'https://api.github.com/users/manya7547';
    const xhr = new XMLHttpRequest();

    // open() method initializes the request. It specifies the HTTP method and the URL to which the request is sent.
    // request will use the GET method, which is typically used to retrieve data from the server.
    // 
    xhr.open('GET',requestURL);

    // check the readyState
    // console.log(xhr.readyState);

    // Let's console.log whenever the ready state changes
    //onreadystatechange - event handler that is called whenever the readyState property of the XMLHttpRequest changes. 
    // We have to give it a function that executes whenever the ready state changes 

    // xhr.onreadystatechange = function(){
    //     console.log(xhr.readyState);
    //     if(xhr.readyState==4){
    //         // we neet to convert the responseText i.e. string into object. So we use JSON.parse()
    //         const data = JSON.parse(this.responseText);
    //         console.log(data); // contains the response data as a string (not object) when the request is successful and complete
    //         console.log(typeof data);
    //         console.log(data.followers);  
    //     }
    // }

    //triggers the request to be sent to the specified URL
    // xhr.send();  

    // to do: display a card which shows profile picture and followers count


    const img = document.getElementById('image');
    const name = document.getElementById('name');
    const count = document.getElementById('count');
    xhr.onreadystatechange = function(){
        console.log(xhr.readyState); 
        if(xhr.readyState == 4){
            const data = JSON.parse(xhr.responseText);
            console.log(data.avatar_url);
            img.src = data.avatar_url;
            name.innerHTML = `<h4 id="name"><b>Name: ${data.name} </b></h4>`;
            count.innerHTML = `<p id="count">Followers Count: ${data.followers} </p>`;
        }
    }

    xhr.send();
</script>
</html>